### 高并发网络服务器的主从线程模型及耗时任务处理

#### 项目名称
基于可变参数模板实现的线程池

**GitHub地址**: [https://github.com/xtu2020/](https://github.com/xtu2020/)

#### 平台及工具
- **gdb**: 用于调试分析死锁和锁问题。
- **cmake**: 作为编译器工具，用于构建项目。
- **clang**: 编译器，提供快速编译和错误检查。
- **Visual Studio Code (VS Code)**: 编辑器，支持多种编程语言和强大的扩展功能。

#### 项目描述
1. 基于可变参数模板实现的线程池，通过 `submitTask()` 接口支持任意任务和任意参数的传递。
2. 使用 `future` 类型定制 `submitTask` 提交任务的返回值。
3. 使用 `map` 管理线程对象，使用 `queue` 管理任务。
4. 基于条件变量 `condition_variable` 和互斥锁 `mutex` 实现线程池的同步机制。
5. 支持 `fixed` 和 `cached` 模式线程池的定制。

#### 项目难点
- 用户任务外界的传递和绑定。
- 线程池的同步机制。

#### 项目问题及解决方案
1. **ThreadPool 回收资源时，等待线程池所有线程退出，死锁问题**
    - **解决方案**: 使用条件变量和互斥锁来确保线程池在关闭前正确地等待所有工作线程完成当前任务。在停止接收新任务后，向工作线程发送终止信号，并使用条件变量通知工作线程退出。在主线程中，确保正确地等待所有工作线程的退出，以避免死锁。
2. **Linux 下 thread 库是默认析构，而 Windows 库是...**
    - **解决方案**: 针对不同平台的线程库差异，可以在代码中添加条件编译宏，以便在不同的操作系统上采取不同的线程处理策略。例如，可以使用 `#ifdef` 宏来检查操作系统的类型，并根据类型调用相应的线程库来正确地回收线程资源。

#### 调试相关命令
- **gdb**
    - `gdb attach pid`: 附加到指定进程以进行调试。
    - `info threads`: 查看当前进程的所有线程信息。
    - `thread tid`: 切换到指定线程。
    - `bt`: 查看当前调用栈，帮助定位死锁或错误的发生位置。
- **cmake**
    - `cmake .. && make`: 在项目根目录下运行此命令，以便通过 cmake 配置项目并使用 make 进行编译。

